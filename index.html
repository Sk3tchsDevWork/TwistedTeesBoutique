<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TwistedTeesBotique - Unique Fashion for Everyone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'twisted-pink': '#ff6b9d',
                        'twisted-purple': '#8b5cf6',
                        'twisted-blue': '#06b6d4',
                        'twisted-green': '#10b981',
                        'twisted-orange': '#f59e0b'
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #ff6b9d 0%, #8b5cf6 25%, #06b6d4 50%, #10b981 75%, #f59e0b 100%);
        }
        .cart-item {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .product-card:hover {
            transform: translateY(-5px);
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-50 to-purple-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold gradient-bg bg-clip-text text-transparent">TwistedTeesBotique</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#home" class="text-gray-700 hover:text-twisted-pink px-3 py-2 rounded-md text-sm font-medium transition-colors">Home</a>
                        <a href="#products" class="text-gray-700 hover:text-twisted-purple px-3 py-2 rounded-md text-sm font-medium transition-colors">Products</a>
                        <a href="#sale" class="text-gray-700 hover:text-twisted-blue px-3 py-2 rounded-md text-sm font-medium transition-colors">Sale</a>
                        <a href="#about" class="text-gray-700 hover:text-twisted-green px-3 py-2 rounded-md text-sm font-medium transition-colors">About</a>
                        <a href="#reviews" class="text-gray-700 hover:text-twisted-orange px-3 py-2 rounded-md text-sm font-medium transition-colors">Reviews</a>
                        <a href="#contact" class="text-gray-700 hover:text-twisted-pink px-3 py-2 rounded-md text-sm font-medium transition-colors">Contact</a>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="toggleCart()" class="relative bg-twisted-pink text-white px-4 py-2 rounded-full hover:bg-pink-600 transition-colors">
                        Cart (<span id="cart-count">0</span>)
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Cart Sidebar -->
    <div id="cart-sidebar" class="fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-50">
        <div class="p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Shopping Cart</h2>
                <button onclick="toggleCart()" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="cart-items" class="space-y-4 mb-6 max-h-96 overflow-y-auto">
                <!-- Cart items will be added here -->
            </div>
            <div class="border-t pt-4">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-lg font-semibold">Total: $<span id="cart-total">0.00</span></span>
                </div>
                <button onclick="checkout()" class="w-full bg-twisted-purple text-white py-3 rounded-lg hover:bg-purple-600 transition-colors font-semibold">
                    Checkout with Shopify Pay
                </button>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section id="home" class="gradient-bg py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-5xl md:text-7xl font-bold text-white mb-6">
                Welcome to TwistedTeesBotique
            </h1>
            <p class="text-xl md:text-2xl text-white mb-8 max-w-3xl mx-auto">
                Discover unique, colorful fashion that expresses your personality. From trendy tees to statement pieces!
            </p>
            <a href="#products" class="bg-white text-twisted-pink px-8 py-4 rounded-full text-lg font-semibold hover:bg-gray-100 transition-colors inline-block">
                Shop Now
            </a>
        </div>
    </section>

    <!-- Products Gallery -->
    <section id="products" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-4xl font-bold text-center mb-12 gradient-bg bg-clip-text text-transparent">Our Collection</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8" id="products-grid">
                <!-- Products will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Sale Section -->
    <section id="sale" class="py-16 bg-gradient-to-r from-twisted-pink to-twisted-purple">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-4xl font-bold text-center mb-12 text-white">üî• Hot Deals üî•</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="sale-grid">
                <!-- Sale items will be loaded here -->
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold mb-6 gradient-bg bg-clip-text text-transparent">About TwistedTeesBotique</h2>
                <div class="max-w-4xl mx-auto">
                    <p class="text-lg text-gray-700 mb-6">
                        Founded with a passion for unique fashion, TwistedTeesBotique brings you carefully curated clothing that stands out from the crowd. We believe fashion should be fun, expressive, and accessible to everyone.
                    </p>
                    <p class="text-lg text-gray-700 mb-8">
                        Our team scours the globe for the most creative designs, sustainable materials, and emerging trends to bring you pieces that make you feel confident and authentic.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="text-center">
                            <div class="bg-twisted-pink text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl">üé®</div>
                            <h3 class="text-xl font-semibold mb-2">Unique Designs</h3>
                            <p class="text-gray-600">Hand-picked pieces you won't find anywhere else</p>
                        </div>
                        <div class="text-center">
                            <div class="bg-twisted-blue text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl">üå±</div>
                            <h3 class="text-xl font-semibold mb-2">Sustainable</h3>
                            <p class="text-gray-600">Eco-friendly materials and ethical production</p>
                        </div>
                        <div class="text-center">
                            <div class="bg-twisted-green text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl">üíù</div>
                            <h3 class="text-xl font-semibold mb-2">Quality First</h3>
                            <p class="text-gray-600">Premium materials that last and feel amazing</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Reviews Section -->
    <section id="reviews" class="py-16 bg-gradient-to-br from-purple-50 to-pink-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-4xl font-bold text-center mb-12 gradient-bg bg-clip-text text-transparent">What Our Customers Say</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <div class="flex items-center mb-4">
                        <div class="flex text-twisted-orange">
                            ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
                        </div>
                    </div>
                    <p class="text-gray-700 mb-4">"Absolutely love my new tees! The quality is amazing and the designs are so unique. I get compliments everywhere I go!"</p>
                    <div class="font-semibold text-twisted-purple">- Sarah M.</div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <div class="flex items-center mb-4">
                        <div class="flex text-twisted-orange">
                            ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
                        </div>
                    </div>
                    <p class="text-gray-700 mb-4">"Fast shipping, great customer service, and the clothes fit perfectly! TwistedTeesBotique is now my go-to for trendy fashion."</p>
                    <div class="font-semibold text-twisted-purple">- Mike R.</div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <div class="flex items-center mb-4">
                        <div class="flex text-twisted-orange">
                            ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
                        </div>
                    </div>
                    <p class="text-gray-700 mb-4">"The sustainable approach and unique designs make this my favorite clothing brand. Highly recommend!"</p>
                    <div class="font-semibold text-twisted-purple">- Emma L.</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-4xl font-bold text-center mb-12 gradient-bg bg-clip-text text-transparent">Get In Touch</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div>
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">Contact Information</h3>
                    <div class="space-y-4">
                        <div class="flex items-center">
                            <div class="bg-twisted-pink text-white w-10 h-10 rounded-full flex items-center justify-center mr-4">üìß</div>
                            <div>
                                <p class="font-semibold">Email</p>
                                <p class="text-gray-600">hello@twistedteesbotique.com</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="bg-twisted-blue text-white w-10 h-10 rounded-full flex items-center justify-center mr-4">üì±</div>
                            <div>
                                <p class="font-semibold">Phone</p>
                                <p class="text-gray-600">(555) 123-TEES</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="bg-twisted-green text-white w-10 h-10 rounded-full flex items-center justify-center mr-4">üìç</div>
                            <div>
                                <p class="font-semibold">Address</p>
                                <p class="text-gray-600">123 Fashion Street, Style City, SC 12345</p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-8">
                        <h4 class="text-lg font-semibold mb-4">Follow Us</h4>
                        <div class="flex space-x-4">
                            <a href="#" class="bg-twisted-purple text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-purple-600 transition-colors">üìò</a>
                            <a href="#" class="bg-twisted-pink text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-pink-600 transition-colors">üì∑</a>
                            <a href="#" class="bg-twisted-blue text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-cyan-600 transition-colors">üê¶</a>
                        </div>
                    </div>
                </div>
                <div>
                    <form class="space-y-6" onsubmit="handleContactForm(event)">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Name</label>
                            <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-twisted-pink focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                            <input type="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-twisted-pink focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                            <textarea rows="4" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-twisted-pink focus:border-transparent"></textarea>
                        </div>
                        <button type="submit" class="w-full bg-gradient-to-r from-twisted-pink to-twisted-purple text-white py-3 rounded-lg hover:from-pink-600 hover:to-purple-600 transition-all font-semibold">
                            Send Message
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4 gradient-bg bg-clip-text text-transparent">TwistedTeesBotique</h3>
                    <p class="text-gray-400">Unique fashion for unique people. Express yourself with our carefully curated collection.</p>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="#home" class="text-gray-400 hover:text-white transition-colors">Home</a></li>
                        <li><a href="#products" class="text-gray-400 hover:text-white transition-colors">Products</a></li>
                        <li><a href="#sale" class="text-gray-400 hover:text-white transition-colors">Sale</a></li>
                        <li><a href="#about" class="text-gray-400 hover:text-white transition-colors">About</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Customer Care</h4>
                    <ul class="space-y-2">
                        <li><a href="#contact" class="text-gray-400 hover:text-white transition-colors">Contact Us</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Shipping Info</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Returns</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Size Guide</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Newsletter</h4>
                    <p class="text-gray-400 mb-4">Stay updated with our latest collections and exclusive offers!</p>
                    <form onsubmit="handleNewsletter(event)" class="flex">
                        <input type="email" placeholder="Your email" class="flex-1 px-3 py-2 bg-gray-700 text-white rounded-l-lg focus:outline-none focus:ring-2 focus:ring-twisted-pink">
                        <button type="submit" class="bg-twisted-pink px-4 py-2 rounded-r-lg hover:bg-pink-600 transition-colors">Subscribe</button>
                    </form>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center">
                <p class="text-gray-400">&copy; 2024 TwistedTeesBotique. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Configuration
        const API_BASE_URL = 'http://localhost:3000/api'; // Change to your production URL

        let products = [];
        let saleProducts = [];
        let cart = [];

        // Load products from Shopify backend
        async function loadProducts() {
            const productsGrid = document.getElementById('products-grid');
            const saleGrid = document.getElementById('sale-grid');

            try {
                // Show loading state
                productsGrid.innerHTML = '<div class="col-span-full text-center py-8"><div class="text-2xl">Loading products...</div></div>';
                saleGrid.innerHTML = '<div class="col-span-full text-center py-8"><div class="text-2xl text-white">Loading sale items...</div></div>';

                // Fetch all products
                const productsResponse = await fetch(`${API_BASE_URL}/products`);
                const productsData = await productsResponse.json();
                
                if (productsData.products) {
                    products = productsData.products.filter(p => !p.isOnSale);
                    
                    // Clear loading and add products
                    productsGrid.innerHTML = '';
                    products.forEach(product => {
                        const productCard = createProductCard(product);
                        productsGrid.appendChild(productCard);
                    });
                }

                // Fetch sale products
                const saleResponse = await fetch(`${API_BASE_URL}/products/sale`);
                const saleData = await saleResponse.json();
                
                if (saleData.products) {
                    saleProducts = saleData.products;
                    
                    // Clear loading and add sale products
                    saleGrid.innerHTML = '';
                    saleProducts.forEach(product => {
                        const productCard = createProductCard(product, true);
                        saleGrid.appendChild(productCard);
                    });
                }

                if (products.length === 0) {
                    productsGrid.innerHTML = '<div class="col-span-full text-center py-8"><div class="text-xl text-gray-600">No products available at the moment.</div></div>';
                }

                if (saleProducts.length === 0) {
                    saleGrid.innerHTML = '<div class="col-span-full text-center py-8"><div class="text-xl text-white">No sale items available at the moment.</div></div>';
                }

            } catch (error) {
                console.error('Error loading products:', error);
                productsGrid.innerHTML = '<div class="col-span-full text-center py-8"><div class="text-xl text-red-600">Error loading products. Please try again later.</div></div>';
                saleGrid.innerHTML = '<div class="col-span-full text-center py-8"><div class="text-xl text-white">Error loading sale items. Please try again later.</div></div>';
            }
        }

        function createProductCard(product, isSale = false) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-lg shadow-lg overflow-hidden product-card transition-transform duration-300';
            
            // Handle product image - use Shopify image or fallback to emoji
            const productImage = product.image && product.image.startsWith('http') 
                ? `<img src="${product.image}" alt="${product.title}" class="w-full h-48 object-cover">`
                : `<div class="h-48 bg-gradient-to-br from-twisted-pink to-twisted-purple flex items-center justify-center text-6xl">${product.image || 'üëï'}</div>`;
            
            const price = parseFloat(product.price || product.variants?.[0]?.price || 0);
            const comparePrice = product.compareAtPrice || product.variants?.[0]?.compareAtPrice;
            
            card.innerHTML = `
                ${productImage}
                <div class="p-6">
                    <h3 class="text-xl font-semibold mb-2 text-gray-800">${product.title || product.name}</h3>
                    <p class="text-gray-600 mb-4">${product.description || product.bodyHtml?.substring(0, 100) + '...' || 'No description available'}</p>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <span class="text-2xl font-bold text-twisted-purple">$${price.toFixed(2)}</span>
                            ${comparePrice && comparePrice > price ? `<span class="text-lg text-gray-500 line-through">$${parseFloat(comparePrice).toFixed(2)}</span>` : ''}
                            ${comparePrice && comparePrice > price ? `<span class="bg-red-500 text-white px-2 py-1 rounded text-sm">SALE</span>` : ''}
                        </div>
                    </div>
                    <div class="mt-4">
                        ${product.variants && product.variants.length > 1 ? `
                            <select id="variant-${product.id}" class="w-full mb-2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-twisted-pink">
                                ${product.variants.map(variant => 
                                    `<option value="${variant.id}" data-price="${variant.price}">${variant.title} - $${parseFloat(variant.price).toFixed(2)}</option>`
                                ).join('')}
                            </select>
                        ` : ''}
                        <button onclick="addToCart('${product.id}', '${(product.title || product.name).replace(/'/g, "\\'")}', ${price}, '${product.image || 'üëï'}', '${product.variants?.[0]?.id || ''}')" 
                                class="w-full bg-gradient-to-r from-twisted-pink to-twisted-purple text-white py-2 rounded-lg hover:from-pink-600 hover:to-purple-600 transition-all font-semibold">
                            Add to Cart
                        </button>
                    </div>
                </div>
            `;
            
            return card;
        }

        function addToCart(id, name, price, image, variantId = '') {
            // Get selected variant if multiple variants exist
            const variantSelect = document.getElementById(`variant-${id}`);
            let selectedVariantId = variantId;
            let selectedPrice = price;
            
            if (variantSelect) {
                const selectedOption = variantSelect.options[variantSelect.selectedIndex];
                selectedVariantId = selectedOption.value;
                selectedPrice = parseFloat(selectedOption.dataset.price);
            }
            
            const cartItemId = `${id}-${selectedVariantId}`;
            const existingItem = cart.find(item => item.cartId === cartItemId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ 
                    cartId: cartItemId,
                    id, 
                    variantId: selectedVariantId,
                    name, 
                    price: selectedPrice, 
                    image, 
                    quantity: 1 
                });
            }
            
            updateCartDisplay();
            showCartNotification(name);
        }

        function removeFromCart(cartId) {
            cart = cart.filter(item => item.cartId !== cartId);
            updateCartDisplay();
        }

        function updateQuantity(cartId, change) {
            const item = cart.find(item => item.cartId === cartId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(cartId);
                } else {
                    updateCartDisplay();
                }
            }
        }

        function updateCartDisplay() {
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            cartCount.textContent = totalItems;
            cartTotal.textContent = totalPrice.toFixed(2);
            
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-gray-500 text-center py-8">Your cart is empty</p>';
                return;
            }
            
            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item bg-gray-50 p-4 rounded-lg';
                const itemImage = item.image && item.image.startsWith('http') 
                    ? `<img src="${item.image}" alt="${item.name}" class="w-12 h-12 object-cover rounded">`
                    : `<div class="text-2xl">${item.image}</div>`;
                
                cartItem.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            ${itemImage}
                            <div>
                                <h4 class="font-semibold text-sm">${item.name}</h4>
                                <p class="text-twisted-purple font-bold">$${item.price.toFixed(2)}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button onclick="updateQuantity('${item.cartId}', -1)" class="bg-gray-300 text-gray-700 w-6 h-6 rounded-full flex items-center justify-center hover:bg-gray-400 transition-colors">-</button>
                            <span class="font-semibold">${item.quantity}</span>
                            <button onclick="updateQuantity('${item.cartId}', 1)" class="bg-twisted-pink text-white w-6 h-6 rounded-full flex items-center justify-center hover:bg-pink-600 transition-colors">+</button>
                            <button onclick="removeFromCart('${item.cartId}')" class="text-red-500 hover:text-red-700 ml-2">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
        }

        function toggleCart() {
            const cartSidebar = document.getElementById('cart-sidebar');
            cartSidebar.classList.toggle('translate-x-full');
        }

        function showCartNotification(productName) {
            // Create a simple notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300';
            notification.textContent = `${productName} added to cart!`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        async function checkout() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            
            try {
                // Show loading state
                const checkoutButton = document.querySelector('button[onclick="checkout()"]');
                const originalText = checkoutButton.textContent;
                checkoutButton.textContent = 'Processing...';
                checkoutButton.disabled = true;
                
                // Prepare line items for Shopify
                const lineItems = cart.map(item => ({
                    variantId: item.variantId,
                    quantity: item.quantity
                }));
                
                // Create checkout via backend
                const response = await fetch(`${API_BASE_URL}/checkout/create`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ lineItems })
                });
                
                const checkoutData = await response.json();
                
                if (checkoutData.success && checkoutData.checkoutUrl) {
                    // Redirect to Shopify checkout
                    window.location.href = checkoutData.checkoutUrl;
                } else {
                    throw new Error(checkoutData.error || 'Failed to create checkout');
                }
                
            } catch (error) {
                console.error('Checkout error:', error);
                alert('There was an error processing your checkout. Please try again.');
                
                // Reset button
                const checkoutButton = document.querySelector('button[onclick="checkout()"]');
                checkoutButton.textContent = 'Checkout with Shopify Pay';
                checkoutButton.disabled = false;
            }
        }

        function handleContactForm(event) {
            event.preventDefault();
            alert('Thank you for your message! We\'ll get back to you within 24 hours.');
            event.target.reset();
        }

        function handleNewsletter(event) {
            event.preventDefault();
            alert('Thank you for subscribing to our newsletter!');
            event.target.reset();
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
        });

        // Close cart when clicking outside
        document.addEventListener('click', function(event) {
            const cartSidebar = document.getElementById('cart-sidebar');
            const cartButton = event.target.closest('button[onclick="toggleCart()"]');
            
            if (!cartSidebar.contains(event.target) && !cartButton && !cartSidebar.classList.contains('translate-x-full')) {
                toggleCart();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96a4a0ba52c5be76',t:'MTc1NDM3OTQzMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
